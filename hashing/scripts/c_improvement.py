from socket import AddressFamily
from scipy.stats import gmean
import numpy as np

x_values = ['MWAY', 'MPASS','NPJ', 'PRJ', 
                     'PMJ$^{JM}$', 'PMJ$^{JB}$','SHJ$^{JM}$', 'SHJ$^{JB}$', 
                     '', 'S-MWAY', 'S-MPASS','S-NPJ', 'S-PRJ', 
                     'S-PMJ$^{JM}$', 'S-PMJ$^{JB}$','S-SHJ$^{JM}$', 'S-SHJ$^{JB}$', 
                     'PS-SHJ$^{JM}$', 'PS-SHJ$^{JB}$', 
                     'SRAJ$^{JM}$', 'SRAJ$^{JB}$',
                     'PS-SRAJ$^{JM}$', 'PS-SRAJ$^{JB}$',]

# lat, throughput
whole_data = [
    [[0.8100948055304013, 0.641138235167947, 0.48966122858833394, 0.36005657905269906, 0.2503319914240586, 0.159610226302775, 0.08994061012384462, 0.04012750833626493, 0.010118082984978296, 0.002480142910399361], [0.8103644992211366, 0.6403963093217451, 0.4898348928915742, 0.3598751974091077, 0.25006540117387466, 0.15968066957422472, 0.08987322689245802, 0.039989630486372024, 0.010028188959471544, 0.002520773714026507], [0.8228314869300585, 0.6632736217882442, 0.5187693449959305, 0.3940515782185967, 0.28585321705208805, 0.19524347653770274, 0.12112144705218608, 0.06492638292419303, 0.019376894372479594, 0.004945098094987891], [0.8216919086942679, 0.6620499908659088, 0.5199588527427874, 0.39429050768713914, 0.28593032871687557, 0.1948209244933134, 0.12062715644571699, 0.0650747948672558, 0.019637203777348174, 0.004875892043092254], [0.8235570489583438, 0.6409036738668619, 0.49045047441483325, 0.35980973969234337, 0.25018751792249144, 0.15951710597054564, 0.10288994352455832, 0.04013756685788682, 0.010003257518397708, 0.0025102255615435448], [0.5938055189667365, 0.45134517166700666, 0.4255536643388654, 0.2683777029626984, 0.22076556524862606, 0.18641193867869943, 0.04283305076579447, 0.029855982619226732, 0.008704436778250108, 0.001578028306940337], [0.8168847080099564, 0.6399623673999093, 0.4899082336040746, 0.3185782366305068, 0.25025127690746685, 0.16079739592473352, 0.09012307800219269, 0.04003022766990259, 0.012816150750126643, 0.0025183707940328514], [0.6127231475380883, 0.5629767926451581, 0.39016784578926755, 0.3216679925801107, 0.16888082183976438, 0.12810523418361291, 0.08319496941834716, 0.03986934511610705, 0.0174338325049258, 0.006868119939882817], [0.8910798612055318, 0.8000049041329242, 0.7011020387694802, 0.6004443908033427, 0.4999892556284079, 0.40000136277533294, 0.30059756591943376, 0.19970216396558513, 0.10017447521996978, 0.05018835280118066], [0.6054048269976642, 0.718492351587571, 0.3323889169055681, 0.5383202716588893, 0.4010672048040326, 0.32554522410531045, 0.2763175747329849, 0.162882686693952, 0.09999023953581615, 0.0695117820509828], [0.8681293773495642, 0.25611328856115323, 0.22478973432283497, 0.19074518157967818, 0.15462013229307506, 0.11754198933365882, 0.0812050661984164, 0.04661879528418412, 0.01705962921578911, 0.0058127270371998805], [0.7202567599295522, 0.6555119854317838, 0.579725976334237, 0.4962899856660657, 0.4061840649160689, 0.31315750402627857, 0.2193611138326749, 0.128991161627481, 0.04887200865542173, 0.01749128191468509], [0.6680293378792039, 0.6423084987715223, 0.6301501631099768, 0.5657454888979246, 0.516661156495844, 0.45921539726776955, 0.3927237989610796, 0.31429414936709854, 0.20996355780806344, 0.13565967538632887], [0.8697141021684685, 0.8339161862019684, 0.7883059950376957, 0.7341535449395986, 0.6707453954523944, 0.5978542557737018, 0.5137797546764048, 0.41287597887341004, 0.27750463065788955, 0.18122050858117694]],

    [[0.8099988394027248, 0.6395021135997058, 0.4900920564176486, 0.35972791164618184, 0.2500153576017065, 0.16013887249503964, 0.08980195865772117, 0.03997822148991844, 0.010035441063524388, 0.0024948304604798057], [0.8094832168380796, 0.6401266882843887, 0.4898734052352408, 0.3599320864273876, 0.2502987695858051, 0.16006609019013138, 0.09002970055992623, 0.03994115292869745, 0.009969147757527538, 0.002499373999234131], [0.8223868723979415, 0.6624579419749173, 0.5192914888813125, 0.3933626594636403, 0.28535531993634633, 0.19467704681320142, 0.12101788873365088, 0.06512107784702986, 0.01951087278974513, 0.004852744777430517], [0.8224359346512583, 0.6623383328599317, 0.518977714460833, 0.39333326145974906, 0.2854930473996587, 0.19448809073161216, 0.12128782723209262, 0.06496107232556075, 0.019421407027481973, 0.004887162128169474], [0.8101209267877774, 0.6402177044550827, 0.4904076099026075, 0.48658440436584244, 0.24981261368219093, 0.1602039773222698, 0.09002432867368948, 0.040026786900925246, 0.010004622293911705, 0.002509930945067315], [0.6057627766686535, 0.3643610178622966, 0.32548845304779156, 0.33858574780732514, 0.20845371323720796, 0.12651800745403607, 0.06648720546080462, 0.03667571433150166, 0.006924391635703693, 0.001966872079018619], [0.8100861943221647, 0.6400573190770603, 0.4894231407051755, 0.3600340685729235, 0.250180775905484, 0.16006211144513358, 0.09006434563337709, 0.0400811326125412, 0.009972588092596758, 0.0024882498807746742], [0.6680161671950906, 0.33305340623784035, 0.39942080101713245, 0.22545571109516935, 0.1985125526317044, 0.14540871795269905, 0.07849773732511013, 0.03873033219305433, 0.012008598981426198, 0.01120165630707934], [0.8999364879364643, 0.8002207850217308, 0.7037162685766295, 0.6002726049018201, 0.5002868934201181, 0.3993318125426425, 0.29948248819619844, 0.20035761992173642, 0.10021582994306515, 0.04987360452624796], [0.4071284898855969, 0.5595607920931444, 0.47978215510236677, 0.43541165377639196, 0.5004226725891175, 0.23996852051149734, 0.3000877345073744, 0.1495975166017364, 0.09750185713756125, 0.05795787255994228], [0.33413800888032397, 0.28491191507634933, 0.2388598138291478, 0.19554160713529695, 0.1546664963356175, 0.11447170543609876, 0.07823292512021485, 0.0439285485326169, 0.016507583224321, 0.005867862103254769], [0.6937368652840318, 0.6314186699297407, 0.5617649826299345, 0.4835804490242106, 0.39830534737078216, 0.3079470039651006, 0.21620942736528143, 0.1277528735545524, 0.048738852862589666, 0.017436753306952317], [0.9139081230182419, 0.8351705294024927, 0.7604880037354126, 0.6897955394632705, 0.6202991088383529, 0.5472001667163084, 0.4696716567604812, 0.3784483315174749, 0.25152720549898855, 0.1589686889780666], [0.8523365452977655, 0.8167082356210779, 0.7741621918886488, 0.7229623059305075, 0.6623881312083904, 0.591575146099518, 0.5090173226967812, 0.4092612596504821, 0.2754570370122813, 0.17882804917904221]],

    [[0.8113879625614371, 0.6389631902783832, 0.48951400201582945, 0.3599977596583463, 0.24982758451732706, 0.1600596957039218, 0.08985554656249768, 0.040214359745490175, 0.009974575468402299, 0.009974575468402299], [0.8107967577507894, 0.6390006235830058, 0.4911100183824335, 0.3611263078651687, 0.24955097960372882, 0.16065970413308778, 0.090133732940599, 0.040020361455065254, 0.009928720964889337, 0.009928720964889337], [0.8220044014905761, 0.6644471841446911, 0.5197159626015911, 0.3926665220376879, 0.28464415096747786, 0.19491382293190454, 0.12088738562565883, 0.06508971683977662, 0.01929375938172944, 0.00493301800710456], [0.8223331190455571, 0.662770919409286, 0.5199284803592068, 0.394005946784556, 0.28558115474315465, 0.19471156278410093, 0.12068032929835479, 0.06498557919484256, 0.01956355642924277, 0.004799848338749219], [0.820517749170488, 0.6507079862045306, 0.49621844350909206, 0.36026817017067947, 0.28045417828100305, 0.16033997343936343, 0.08971016336727493, 0.04008088732826271, 0.010044717601827392, 0.0025167473904043106], [0.6261770378205842, 0.6784891429075858, 0.4785411280757592, 0.3857452924342977, 0.2178171575274882, 0.2695395078115981, 0.0680328382141099, 0.029762779527834453, 0.13406554210332547, 0.12776433820650135], [0.8207373616089095, 0.65353003591478, 0.49692791158968097, 0.3600452474123536, 0.28025429232172294, 0.16004897600372603, 0.09002871891735091, 0.03992489597190235, 0.010032651465858253, 0.002488994082613953], [0.6113687061397551, 0.5071196496207632, 0.43764191054615337, 0.3132130562522542, 0.23104636304194737, 0.09940282784974128, 0.06353763092793246, 0.04157844657482275, 0.014796281479011098, 0.02447080891391471], [0.90011592094972, 0.80232891561648, 0.7018278144471284, 0.5998405947517527, 0.4991870953771283, 0.3991283740465502, 0.30010217376080306, 0.2004178053941404, 0.10032230405913738, 0.050331764961391155], [0.8081807764504718, 0.5534467162383421, 0.5711800760648574, 0.5528913473336629, 0.45616646073104133, 0.3990742815868853, 0.27383290508974234, 0.1721459365882927, 0.10073757193970485, 0.0715320694311516], [0.3375408322582429, 0.2895086441575005, 0.24364347273033354, 0.199846976379294, 0.15748373302425328, 0.11817018263007027, 0.08013260719281924, 0.0464391474368683, 0.016925024321489984, 0.006003717278125111], [0.7193551138307874, 0.6535167946351625, 0.5787527893727498, 0.49604502417489577, 0.405751933788503, 0.3131142844327247, 0.22048376560959243, 0.1291153112294257, 0.049251365775849355, 0.017706769711759968], [0.9159283949521565, 0.837276213809858, 0.7634732967926068, 0.6924541317532816, 0.6216785480992669, 0.5506444607273765, 0.47091890337666176, 0.38098692467456685, 0.2526076318051075, 0.16170298072995462], [0.8702060134371103, 0.8348376035132253, 0.7894045304137932, 0.7345021975982932, 0.6727224939304827, 0.5996623872051315, 0.5154525812807026, 0.41391941717336606, 0.27892704923341993, 0.1807781076235592]]
]
'''
data_ind = {0:'Rovio ',1:'DEBS ',2:'EECR '}
# data_name = [, , ]
smp_ind = {0:'non-sample ',1:'sample '}

lazy_ind = [0,1,2,3]

no_smp_eager_ind = [4,5,6,7, 4,5,6,7,]
eager_ind = [4,5,6,7, 8,9,10,11]

no_smp_rsvr_ind = [6, 7]
rsvr_ind = [10, 11]

no_smp_min_data_uti = [4,5,6,7, 8, 10]
min_data_uti = [4,5,6,7, 8, 10]
no_smp_max_data_uti = [6, 7]
max_data_uti = [9, 11]
'''

task = {0:'total mean', 1:'sampling rate mean'}
res = []

tmp = []

for i in whole_data:
    for j in i:
        tmp = tmp + j
# print (tmp)

res.append(np.mean(tmp))

tmp = []

for i in whole_data:
    lala = []
    for j in range(10):
        # print([i[k][j] for k in range(14)])
        lala.append(np.mean([i[k][j] for k in range(14)]))
    print(lala)
    tmp.append(lala)

print(tmp)
ttmp = tmp
tmp = []
for i in range(len(ttmp[0])):
    tmp.append(np.mean( list(ttmp[j][i] for j in range(len(ttmp))) ) )

res.append(tmp)

for i in task.keys():
    print("{0} {1} {2}".format(i, task[i], res[i]))